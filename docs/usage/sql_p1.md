#### Using {attr}`~snowmobile.SQL.auto_run`

```{admonition} Section Take-Away
:class: note

**The {class}`~snowmobile.SQL` object has an {attr}`~snowmobile.SQL.autorun` attribute which determines whether the SQL generated by a given method is returned as a string
or executed on the current connection.** 

**The default value of the {attr}`~snowmobile.SQL.autorun` is `True`, meaning it will execute the generated SQL as opposed to returning it as a string.**

The behavior demonstrated below encompasses all methods of {class}`snowmobile.SQL`, not just {meth}`snowmobile.SQL.table_sample`.
```

````{tabbed} Setup

Let's instantiate a {class}`~snowmobile.Connector` object and create a dummy table to use for the rest of the example. 

Lines 11-12 in the below make use of {class}`snowmobile.Script` to parse a sql file containing a single 
statement and and execute it to keep from cluttering the snippet with the full query; the contents of the table created 
are the only thing that matters, but the script is included in the `dummy_table.sql` tab for clarity.

```{literalinclude} ../examples/mod_sql/sql_working_example.py
:language: python
:lineno-start: 1
:lines: 1-12
```
This creates a temp table for us called `dummy_table` with the following structure:

| SAMPLE\_KEY | SAMPLE\_METRIC1 | SAMPLE\_METRIC2 |
| :--- | :--- | :--- |
| 1 | 1 | 75 |
| 2 | 1 | 11 |
| 3 | 1 | 1 |
| 4 | 2 | 1 |
| 5 | 3 | 55 |
````

````{tabbed} dummy_table.sql

```{literalinclude} ../examples/mod_sql/dummy_table.sql
:language: sql
:lineno-start: 1
:lines: 1-13
```

````

##### 1: When {attr}`~snowmobile.SQL.auto_run`=*True*

By default, calling the  method on our dummy table will execute the generated query
and return the results in a {class}`~pandas.DataFrame`.
```{literalinclude} ../examples/mod_sql/sql_working_example.py
:language: python
:lineno-start: 16
:lines: 16-19
```

Whether set to *True* or *False*, the behavior imposed by the {attr}`snowmobile.SQL.auto_run` can be superseded by the `run` keyword argument provided
to any method:
```{literalinclude} ../examples/mod_sql/sql_working_example.py
:language: python
:lineno-start: 21
:lines: 21-23
```

With the contents of `sample_run_false: str` being:
```{literalinclude} ../examples/mod_sql/sql_working_example.py
:language: python
:lineno-start: 24
:lines: 24-24
```

    >>>
    select
        *
    from SANDBOX.SAMPLE_TABLE
    limit 5

##### 1: When {attr}`~snowmobile.SQL.auto_run`=*False*

To reverse this behavior, {attr}`~snowmobile.SQL.auto_run` can be set to to *False* with:
```{literalinclude} ../examples/mod_sql/sql_working_example.py
:language: python
:lineno-start: 28
:lines: 28-28
```

With {attr}`~snowmobile.SQL.auto_run` disabled, the *run=False* argument can be omitted to produce the same string of sql created on line **21** above:
```{literalinclude} ../examples/mod_sql/sql_working_example.py
:language: python
:lineno-start: 30
:lines: 30-33
```

To get the {class}`~pandas.DataFrame` created on line **16**, we now need to explicitly pass *run=True* to the method:

```{literalinclude} ../examples/mod_sql/sql_working_example.py
:language: python
:lineno-start: 35
:lines: 35-38
```

The full script for this section can be found [here](../snippets.md#sql_working_examplepy).
